本教程来自iniwap！转载请注明出处！
作者：┈┾夨憶D*.亼ぺ
#很长时间没有写教程了
#忙是一个原因。最主要的是教程写出来，支持的人寥寥无几
#实在是郁闷。唉。。真的希望大家能多支持下
#不然我实在没激情写下去
#好了闲话不说了，这是第十五课了吧
#这节讲讲如何生成mask，也就是如何弄个透明的耍耍呢？
#可以想象，在一张图上放个透明的图片，是不是很爽？
#想到什么没？对了，就是游戏中的精灵。哈哈
#下面开始吧
#这节主要用一个函数教大家如何生成mask，至于这个mask放哪
#我想前面的教程你已经学的差不多了吧？
#我没研究过图像处理，所以有点以其昏昏使人昭昭的感觉，所以全当是跟大家一起分析段代码了
#开始分析这段函数吧。
#首先要说明的pys60的Image类加载透明的png图像为不透明的
#但是前面讲过，blit有个mask参数的，所以又了mask??能整出透明效果来
#对了，可能只支持png格式的哦。
#原理很简单，把与固定点像素相同的点全部(mask)遮盖即涂黑

#定义函数
def automask(im):
#获得图片的宽和高
width, height = im.size
#记得将过，这个是新建一个图像，’1’表示生成黑白图像
mask = Image.new(im.size, ’1’)
#getpixel()函数返回像素(0,0)表示图像最左上角
#因其返回的是列表所以取[0]
tran=im.getpixel((0,0))[0]
#循环所有点
for y in range(height):
#获得某一高度的所有点像素
#[(x,y) for x in range(width)]
#即y固定，x取遍所有width，这样构成一个列表
line = im.getpixel([(x, y) for x in range(width)])
#现在line是一个列表，所以循环每个点
for x in range(width):
#判断每个x像素是否和左上角的像??相同
if line[x] == tran:
#相同则涂黑，画黑点
mask.point((x,y), 0)
#循环完毕，返回mask
#这样就获得了mask
return mask
mask=automask(img)
#只能讲到这种地步了。我没研究过，呵呵~望大家见谅。
#慢慢研究琢磨吧。不过你也可以直接调用这个函数的。怕麻烦的话。
#具体效果自己测试吧。
